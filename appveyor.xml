version: '{build}'
image: Visual Studio 2017

before_build:
    - cmd: nuget restore Echo.sln

build:
    project: Echo.sln
    verbosity: detailed

environment:
    COVERALLS_REPO_TOKEN:
        secure: ietwg3CM9P2rIXCj2b++OOPUs+3lMJZksq7GXcbjDVq7pJsFQb3eUmY17J6hcMfL

after_test:
    - cmd: packages\OpenCover.4.6.166\tools\OpenCover.Console.exe -register:user -filter:"+[*]*" -target:"packages\xunit.runner.console\2.2.0\tools\xunit.console.exe" -targetargs:"/noshadow -parallel all test\Echo.IntegrationTests\bin\Debug\net452\Echo.IntegrationTests.dll test\Echo.UnitTests\bin\Debug\net452\Echo.UnitTests" -output:coverage.xml
    - cmd: packages\coveralls.io.1.3.4\tools\coveralls.net.exe --opencover coverage.xml -r %COVERALLS_REPO_TOKEN%
